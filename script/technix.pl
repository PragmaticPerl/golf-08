#!perl -np0
sub h{my$_=pop;$f=$&,$'=~/\d/,$f+$&==10||$f==$&?s/$f(\D*)$&/ $1 /:0while/\d/g;$_}while($,ne$_){my@e;$e["@-"%10].=$&while/./gs;$,='';for$i(0..y/\n//){$,.=substr h($_),$i,1for@e}$_=h$,;s/ {9}\n//}